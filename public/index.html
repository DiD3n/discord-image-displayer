<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Discord's content</title>
    <style>
        body {
            margin: 0;
            min-height: 100vh;
            min-width: 100vw;
            overflow: hidden;

            display: flex;
            justify-content: center;
            align-items: center;
        }
        body img {
            max-width: 100vw;
            max-height: 100vh;
            object-fit: contain;
        }
    </style>
    <script>
        const ws = new WebSocket('ws://localhost:8081');

        let img;
        let timeout;

        ws.onmessage = function(msg) {
            /** @type {WebsocketMessage} */
            msg = JSON.parse(msg.data);

            const clearImg = () => {
                if (img) {
                    img.remove();
                    img = null;
                }
            };

            if (msg.type === 'image') {
                clearImg();

                img = document.createElement('img');
                img.src = msg.url;

                document.body.appendChild(img);

                if (timeout)
                    clearTimeout(timeout);

                timeout = setTimeout(function() {
                    clearImg();
                }, 30000);
            }
        };
    </script>
</head>
<body>

</body>
</html>